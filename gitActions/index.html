<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Git Actions - PPS-Unidad0-Tarea-PPS-IvanMuriel</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">PPS-Unidad0-Tarea-PPS-IvanMuriel</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../git/" class="nav-link">Git</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Git Actions</a>
                            </li>
                            <li class="nav-item">
                                <a href="../gitPages/" class="nav-link">Git Pages</a>
                            </li>
                            <li class="nav-item">
                                <a href="../docker/" class="nav-link">Docker</a>
                            </li>
                            <li class="nav-item">
                                <a href="../conclusiones/" class="nav-link">Conclusiones</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../git/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../gitPages/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#actividad-unidad-0-gitactions" class="nav-link">Actividad Unidad 0 - gitActions</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#desarrollo" class="nav-link">Desarrollo</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#paso-1-preparacion-del-proyecto-y-documentacion" class="nav-link">Paso 1: Preparación del Proyecto y Documentación</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="actividad-unidad-0-gitactions">Actividad Unidad 0 - gitActions</h1>
<p>Implementar una <em>pipeline</em> de Integración Continua (CI) en GitHub Actions para automatizar la generación y validación de la documentación de un proyecto Python cada vez que se actualiza el código o la documentación fuente.</p>
<ol>
<li><strong>Integrar Herramientas:</strong> Configurar y utilizar <strong>GitHub Actions</strong> como motor de una <em>pipeline</em> de Integración Continua (CI/CD).</li>
<li><strong>Automatizar la Calidad:</strong> Crear un flujo de trabajo que se dispare automáticamente con eventos clave (ej. <code>git push</code>).</li>
<li><strong>Gestión de Dependencias:</strong> Utilizar comandos de Python (<code>pip</code>) dentro de la <em>pipeline</em> para instalar las dependencias necesarias de la aplicación y la documentación (ej., <code>MkDocs</code>).</li>
<li><strong>Despliegue Continuo (CD Básico):</strong> Demostrar un proceso de <strong>Despliegue Continuo</strong> al actualizar y publicar la documentación en las GitHub Pages del proyecto.</li>
<li><strong>Fomentar DevSecOps:</strong> Aplicar la filosofía de que el mantenimiento y la validación de la documentación (una forma de "calidad y consistencia") deben ser un paso <strong>obligatorio y automatizado</strong> en el ciclo de vida del desarrollo.</li>
</ol>
<h2 id="desarrollo">Desarrollo</h2>
<p>Lo primero que haremos será instalar <code>GitHub CLI</code>.<br />
<strong><a href="https://docs.github.com/es/github-cli/github-cli/about-github-cli">GiHug CLI</a></strong> (o <code>gh</code>) es una herramienta de código abierto que te permite usar GitHub directamente desde la línea de comandos de tu terminal. Permite gestionar repositorios, solicitudes de extracción (pull requests), problemas, flujos de trabajo, lanzamientos y mucho más, sin necesidad de salir de tu entorno de línea de comandos, lo que ahorra tiempo y facilita la automatización de tareas con scripts.
Vamos a partir de la estructura del repositorio que hemos creado en la Actividad sobre el uso de Git.</p>
<p>Recordamos que en ella hicimos un respositorio de una calculadora en Python.</p>
<p>A partír de ahí vamos a crear un <code>workflow</code> de <code>Github Actions</code>.  </p>
<p><strong><a href="https://docs.github.com/es/actions/get-started/understand-github-actions">GitHub Actions</a></strong> es una plataforma de automatización integrada en GitHub que permite crear flujos de trabajo (workflows) para automatizar tareas de desarrollo de software, como la compilación, las pruebas y el despliegue continuo (CI/CD). Se define mediante archivos YAML dentro del propio repositorio y puede ejecutarse en máquinas virtuales de Linux, Windows o macOS, o en ejecutores auto-hospedado.
En esta ocasión vamos a utilizar MkDocs para ver cómo funciona el <code>workflow</code>.  </p>
<p><strong><a href="https://geoinnova.org/blog-territorio/mkdocs-como-crear-y-publicar-documentacion-eficientemente/">MkDocs</a></strong> es un generador de sitios estáticos escrito en Python que permite crear rápidamente sitios de documentación para proyectos usando archivos en
Markdown y un único archivo de configuración en YAML. Transforma el contenido de Markdown en páginas HTML, CSS y JavaScript, lo que facilita la generación y publicación de documentación técnica de proyectos de código abierto de manera eficiente.</p>
<h2 id="paso-1-preparacion-del-proyecto-y-documentacion">Paso 1: Preparación del Proyecto y Documentación</h2>
<h3 id="1-estructura-de-archivos">1. Estructura de Archivos</h3>
<p>Para que la generación de la web funcione correctamente con el archivo de configuración mostrado, la estructura de carpetas del proyecto debe ser la siguiente:</p>
<pre><code class="language-text">PPS-Unidad0-Tarea-PPS/
├── docs/
│   ├── index.md
│   ├── git.md
│   ├── gitActions.md
|   ├── gitPages.md
│   ├── docker.md
│   ├── conclusiones.md
│   └── img/
├── mkdocs.yml
├── requirements.txt
└── .github/
    └── workflows/
        └── deploy_docs.yml
</code></pre>
<h3 id="2-configuracion-de-mkdocs">2. Configuración de MkDocs</h3>
<p>Creamos (o editamos) el archivo mkdocs.yml en la raíz del proyecto con la configuración adaptada a los contenidos de la unidad:</p>
<pre><code class="language-yaml"># mkdocs.yml

# -------------------------------------------------------------
# CONFIGURACIÓN GENERAL DEL SITIO
# -------------------------------------------------------------
site_name: PPS-Unidad0-Tarea-PPS-IvanMuriel # Define el título que aparecerá en la barra de navegación y en la etiqueta &lt;title&gt; del navegador.

# -------------------------------------------------------------
# ESTRUCTURA DE NAVEGACIÓN (MENÚ)
# -------------------------------------------------------------
# Define la lista de enlaces y el orden de aparición en el menú de navegación principal.
nav:
  # El nombre de la sección en el menú: nombre_archivo.md
  - Home: index.md             # Primer elemento del menú, enlaza con el archivo 'index.md'.
  - Git: git.md
  - Git Actions: gitActions.md
  - Git Pages: gitPages.md
  - Docker: docker.md
  - Conclusiones: conclusiones.md
# -------------------------------------------------------------
# DIRECTORIOS
# -------------------------------------------------------------
# Ruta de la carpeta que contiene todos los archivos .md (Markdown) de la documentación.
# MkDocs buscará aquí los archivos listados en 'nav'.
doc_dir: docs 
# -------------------------------------------------------------
# TEMA (Opcional)
# -------------------------------------------------------------
# theme: 
#   name: 'material' # Si usas el popular tema Material for MkDocs.
#   # highlightjs: true
#   # code_fences: true

</code></pre>
<ol>
<li><strong>Creación del Workflow:</strong> Dentro del directorio <code>.github/</code>, crea el directorio <code>workflows/</code> y dentro de él, el archivo <code>deploy_docs.yml</code>.</li>
<li><strong>Definición del Flujo de Trabajo (YAML):</strong> Pega la siguiente configuración en <code>deploy_docs.yml</code>. Este <em>workflow</em> se dispara con cada <em>push</em> a la rama <code>main</code> (o <code>master</code>) y utiliza una acción oficial para gestionar el despliegue de MkDocs a GitHub Pages.</li>
</ol>
<p><code>.github/workflows/deploy_docs.yml</code></p>
<pre><code class="language-yaml"># -----------------------------------------------------------
# CONFIGURACIÓN DEL WORKFLOW
# -----------------------------------------------------------
name: Deploy MkDocs # Define el nombre de este flujo de trabajo (aparece en la pestaña 'Actions' de GitHub).

on:
  # Define el evento que dispara este flujo de trabajo.
  push:
    # Este workflow se ejecutará automáticamente cada vez que se haga un 'push' (subida)
    # de código al repositorio.
    branches:
      - main # Específicamente, solo se ejecuta si el push se realiza sobre la rama 'main'.

# -----------------------------------------------------------
# PERMISOS
# -----------------------------------------------------------
# Otorga permisos específicos al GITHUB_TOKEN que se usará en este workflow.
permissions:
  contents: write # Permite que el token pueda leer y escribir contenido (necesario para la rama gh-pages).
  pages: write    # Permite gestionar y escribir en la configuración de GitHub Pages.
  id-token: write # Permite solicitar tokens de OpenID Connect (necesario para algunas integraciones de seguridad).

# -----------------------------------------------------------
# DEFINICIÓN DEL TRABAJO (JOB)
# -----------------------------------------------------------
jobs:
  deploy: # Define un único trabajo llamado 'deploy'.
    runs-on: ubuntu-latest # Especifica que este trabajo se ejecutará en un servidor virtual con la última versión de Ubuntu.

    steps: # La secuencia de comandos o acciones a ejecutar en el servidor de Ubuntu.

    # -------------------------------------------------------
    # PASO 1: OBTENER EL CÓDIGO FUENTE
    # -------------------------------------------------------
    - name: Checkout Repo # Nombre descriptivo del paso.
      # Utiliza una acción oficial de GitHub para clonar el repositorio
      # completo en el entorno de trabajo del Runner.
      uses: actions/checkout@v3

    # -------------------------------------------------------
    # PASO 2: CONFIGURAR PYTHON
    # -------------------------------------------------------
    - name: Set up Python # Nombre descriptivo del paso.
      # Utiliza una acción oficial para configurar el entorno de Python.
      uses: actions/setup-python@v4
      with:
        python-version: '3.x' # Especifica que se debe usar la última versión de Python 3.

    # -------------------------------------------------------
    # PASO 3: INSTALAR DEPENDENCIAS
    # -------------------------------------------------------
    - name: Install dependencies # Nombre descriptivo del paso.
      # Comando que se ejecuta en la terminal de Ubuntu.
      # Instala el generador de documentación MkDocs (necesario para el siguiente paso).
      run: pip install mkdocs

    # -------------------------------------------------------
    # PASO 4: CONSTRUIR Y DESPLEGAR LA DOCUMENTACIÓN
    # -------------------------------------------------------
    - name: Deploy docs # Nombre descriptivo del paso.
      # Comando que se ejecuta en la terminal.
      # 1. 'mkdocs gh-deploy': Construye la documentación (generando los archivos HTML/CSS/JS).
      # 2. '--force': Sube esos archivos generados y fuerza su publicación en la rama 'gh-pages'.
      run: mkdocs gh-deploy --force
      # Configuración de variables de entorno específicas para este paso.
      env:
        # Pasa el Token de GitHub. MkDocs lo necesita para autenticarse y subir
        # los archivos a la rama 'gh-pages' del repositorio.
        GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
</code></pre>
<h3 id="paso-3-ejecucion-y-verificacion">Paso 3: Ejecución y Verificación</h3>
<ol>
<li><strong>Commit Inicial:</strong></li>
</ol>
<p>Haz <em>commit</em> y <em>push</em> de los nuevos archivos .
    <code>bash
    git add .
    git commit -m " Configuración inicial de MkDocs y pipeline CI/CD de documentación"
    git push origin main</code></p>
<ol>
<li><strong>Monitoreo en GitHub:</strong></li>
</ol>
<p>Ve a la pestaña <strong>Actions</strong> de tu repositorio. Deberías ver el <em>workflow</em> "Documentación CI/CD" ejecutándose.</p>
<p><img alt="alt text" src="../img/deploy.png" /></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
